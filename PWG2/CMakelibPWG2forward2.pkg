# -*- mode: CMake -*-
#------------------------------------------------------------------------#
# Package File for PWG2forward2                                          #
# Author : Christian Holm Christensen (cholm@nbi.dk)                     #
# Variables Defined :                                                    #
#                                                                        #
# SRCS - C++ source files                                                #
# HDRS - C++ header files                                                #
# DHDR - ROOT Dictionary Linkdef header file                             #
# CSRCS - C source files                                                 #
# CHDRS - C header files                                                 #
# EINCLUDE - Include directories                                         #
# EDEFINE - Compiler definitions                                         #
# ELIBS - Extra libraries to link                                        #
# ELIBSDIR - Extra library directories                                   #
# PACKFFLAGS - Fortran compiler flags for package                        #
# PACKCXXFLAGS - C++ compiler flags for package                          #
# PACKCFLAGS - C compiler flags for package                              #
# PACKSOFLAGS - Shared library linking flags                             #
# PACKLDFLAGS - Module linker flags                                      #
# PACKBLIBS - Libraries to link (Executables only)                       #
# EXPORT - Header files to be exported                                   #
# CINTHDRS - Dictionary header files                                     #
# CINTAUTOLINK - Set automatic dictionary generation                     #
# ARLIBS - Archive Libraries and objects for linking (Executables only)  #
# SHLIBS - Shared Libraries and objects for linking (Executables only)   #
#------------------------------------------------------------------------#

set ( SRCS   
  FORWARD/analysis2/AliAODForwardMult.cxx
  FORWARD/analysis2/AliFMDCorrAcceptance.cxx
  FORWARD/analysis2/AliFMDCorrDoubleHit.cxx
  FORWARD/analysis2/AliFMDCorrELossFit.cxx 
  FORWARD/analysis2/AliFMDCorrMergingEfficiency.cxx
  FORWARD/analysis2/AliFMDCorrSecondaryMap.cxx 
  FORWARD/analysis2/AliFMDCorrVertexBias.cxx
  FORWARD/analysis2/AliFMDCorrector.cxx 
  FORWARD/analysis2/AliFMDDensityCalculator.cxx
  FORWARD/analysis2/AliFMDEnergyFitter.cxx
  FORWARD/analysis2/AliFMDEnergyFitterTask.cxx 
  FORWARD/analysis2/AliFMDEventInspector.cxx
  FORWARD/analysis2/AliFMDHistCollector.cxx
  FORWARD/analysis2/AliFMDSharingFilter.cxx
  FORWARD/analysis2/AliFMDMCEventInspector.cxx
  FORWARD/analysis2/AliFMDMCCorrector.cxx
  FORWARD/analysis2/AliFMDMCDensityCalculator.cxx
  FORWARD/analysis2/AliFMDMCSharingFilter.cxx
  FORWARD/analysis2/AliFMDMCTrackDensity.cxx
  FORWARD/analysis2/AliForwardCorrectionManager.cxx
  FORWARD/analysis2/AliForwardMultiplicityBase.cxx
  FORWARD/analysis2/AliForwardMultiplicityTask.cxx
  FORWARD/analysis2/AliForwardMCMultiplicityTask.cxx 
  FORWARD/analysis2/AliForwardMCCorrectionsTask.cxx
  FORWARD/analysis2/AliForwarddNdetaTask.cxx
  FORWARD/analysis2/AliForwardUtil.cxx
  FORWARD/analysis2/AliCentralMultiplicityTask.cxx
  FORWARD/analysis2/AliCentralMCMultiplicityTask.cxx
  FORWARD/analysis2/AliCentralMCCorrectionsTask.cxx
  FORWARD/analysis2/AliAODCentralMult.cxx
  FORWARD/analysis2/AliCentralCorrSecondaryMap.cxx
  FORWARD/analysis2/AliCentralCorrAcceptance.cxx 
  FORWARD/analysis2/AliCentraldNdetaTask.cxx
  FORWARD/analysis2/AliBasedNdetaTask.cxx
  FORWARD/analysis2/AliMCTruthdNdetaTask.cxx
  FORWARD/analysis2/AliForwardFlowUtil.cxx
  FORWARD/analysis2/AliForwardFlowTaskQC.cxx
  FORWARD/analysis2/AliSPDMCTrackDensity.cxx
  FORWARD/analysis2/AliFMDMultCuts.cxx
  FORWARD/analysis2/AliPoissonCalculator.cxx
  FORWARD/analysis2/AliForwardQATask.cxx
  FORWARD/analysis2/AliCopyHeaderTask.cxx
)

string ( REPLACE ".cxx" ".h" HDRS "${SRCS}" )
set ( HDRS ${HDRS} FORWARD/analysis2/AliFMDStripIndex.h )

set ( EINCLUDE  ANALYSIS PWG2/FORWARD/analysis2 PWG0 STEER/ESD STEER/STEERBase)

set ( EXPORT FORWARD/analysis2/AliAODForwardMult.h 
             FORWARD/analysis2/AliAODCentralMult.h 
             FORWARD/analysis2/AliForwardUtil.h  
	     FORWARD/analysis2/AliFMDEventInspector.h
	     FORWARD/analysis2/AliFMDMCEventInspector.h)

set ( DHDR  PWG2forward2LinkDef.h)

# --------------------------------------------------------------------
# Extra targets 
#
add_custom_command( OUTPUT FORWARD/doc/doc.pdf 
                    COMMAND pdflatex doc
		    COMMAND pdflatex doc
		    COMMAND pdflatex doc
		    COMMAND mkdir -p ${CMAKE_CURRENT_BINARY_DIR}/FORWARD/doc
		    COMMAND mv doc.pdf ${CMAKE_CURRENT_BINARY_DIR}/FORWARD/doc/
		    WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/FORWARD/doc
		    MAIN_DEPENDENCY FORWARD/doc/doc.tex )

add_custom_command( OUTPUT FORWARD/doc/html/index.html 
		    COMMAND mkdir -p ${CMAKE_CURRENT_BINARY_DIR}/FORWARD/doc
                    COMMAND sed -e 's,../analysis2,${CMAKE_CURRENT_SOURCE_DIR}/FORWARD/analysis2,' -e 's,OUTPUT_DIRECTORY *=.*,OUTPUT_DIRECTORY = FORWARD/doc/,' < ${CMAKE_CURRENT_SOURCE_DIR}/FORWARD/doc/Doxyfile > ${CMAKE_CURRENT_BINARY_DIR}/FORWARD/doc/Doxyfile
		    COMMAND doxygen ${CMAKE_CURRENT_BINARY_DIR}/FORWARD/doc/Doxyfile
		    DEPENDS ${SRCS} ${HDRS} )

add_custom_target( PWG2forward-doc DEPENDS FORWARD/doc/doc.pdf )
add_custom_target( PWG2forward-doxy DEPENDS FORWARD/doc/html/index.html )

add_custom_target( install-PWG2forward2.par 
  COMMAND ${CMAKE_COMMAND} -E copy ${CMAKE_BINARY_DIR}/${PACKAGE}.par ${CMAKE_INSTALL_PREFIX}
  COMMAND ${CMAKE_COMMAND} -E cmake_echo_color --green --bold "${PACKAGE}.par installed in ${CMAKE_INSTALL_PREFIX}"
  DEPENDS ${CMAKE_BINARY_DIR}/${PACKAGE}.par)

# --------------------------------------------------------------------
# Extra installation targets 
#
# Install scripts 
install ( DIRECTORY FORWARD/analysis2/scripts 
	  DESTINATION PWG2/FORWARD/analysis2 
	  PATTERN ".d"  EXCLUDE 
	  PATTERN ".so" EXCLUDE)

# install QA scripts 
install ( DIRECTORY FORWARD/analysis2/qa
	  DESTINATION PWG2/FORWARD/analysis2 
	  PATTERN ".d"  EXCLUDE 
	  PATTERN ".so" EXCLUDE)

# install correction scripts 
install ( DIRECTORY FORWARD/analysis2/corrs
	  DESTINATION PWG2/FORWARD/analysis2 
	  PATTERN ".d"  EXCLUDE 
	  PATTERN ".so" EXCLUDE)

# install trains 
install ( DIRECTORY FORWARD/analysis2/trains 
	  DESTINATION PWG2/FORWARD/analysis2 
	  PATTERN ".d"  EXCLUDE 
	  PATTERN ".so" EXCLUDE)

# Install other scripts
install ( FILES FORWARD/analysis2/AddTaskCentraldNdeta.C
  		FORWARD/analysis2/AddTaskCentralMCCorr.C
		FORWARD/analysis2/AddTaskCentralMult.C
  		FORWARD/analysis2/AddTaskCentralTracks.C
                FORWARD/analysis2/AddTaskCopyHeader.C
		FORWARD/analysis2/AddTaskFMDELoss.C
  		FORWARD/analysis2/AddTaskForwardMCCorr.C
                FORWARD/analysis2/AddTaskForwardMult.C
                FORWARD/analysis2/AddTaskForwardQA.C
		FORWARD/analysis2/AddTaskForwarddNdeta.C
		FORWARD/analysis2/AddTaskMCTruthdNdeta.C
		FORWARD/analysis2/DrawdNdeta.C
		FORWARD/analysis2/ForwardAODConfig.C
		FORWARD/analysis2/CentralAODConfig.C
                FORWARD/analysis2/MakeAOD.C
		FORWARD/analysis2/MakedNdeta.C
                FORWARD/analysis2/MakeELossFits.C
		FORWARD/analysis2/MakeEvaluateTriggers.C
                FORWARD/analysis2/MakeForwardQA.C
		FORWARD/analysis2/MakeMCCorr.C		
                FORWARD/analysis2/OtherData.C
           DESTINATION PWG2/FORWARD/analysis2 )

# Install corrections 
install ( DIRECTORY FORWARD/corrections/DoubleHit
	            FORWARD/corrections/ELossFits
		    FORWARD/corrections/MergingEfficiency
		    FORWARD/corrections/SecondaryMap
		    FORWARD/corrections/VertexBias
		    FORWARD/corrections/Acceptance
		    FORWARD/corrections/Normalization
		    FORWARD/corrections/CentralAcceptance
		    FORWARD/corrections/CentralSecMap
          DESTINATION PWG2/FORWARD/corrections 
	  PATTERN ".svn" EXCLUDE)

# Install shell script 
install ( FILES FORWARD/analysis2/Run.sh 
	  DESTINATION PWG2/FORWARD/analysis2 
	  PERMISSIONS OWNER_EXECUTE OWNER_WRITE OWNER_READ
                      GROUP_EXECUTE GROUP_READ
		      WORLD_EXECUTE WORLD_READ )


# --------------------------------------------------------------------
#
# EOF
# 
